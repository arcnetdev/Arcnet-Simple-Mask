/**
 * Created by Weslley Neri on 19/02/14.
 */
(function(t){var n=function(e,n,r){var i=this,s;e=t(e);n="function"===typeof n?n(e.val(),void 0,e,r):n;i.init=function(){r=r||{};i.byPassKeys=[9,16,17,18,36,37,38,39,40,91];i.translation={0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}};i.translation=t.extend({},i.translation,r.translation);i=t.extend(!0,{},i,r);e.each(function(){!1!==r.maxlength&&e.attr("maxlength",n.length);e.attr("autocomplete","off");o.destroyEvents();o.events();o.val(o.getMasked())})};var o={getCaret:function(){var t;t=0;var n=e.get(0),r=document.selection,i=n.selectionStart;if(r&&!~navigator.appVersion.indexOf("MSIE 10"))n.focus(),t=r.createRange(),t.moveStart("character",-n.value.length),t=t.text.length;else if(i||"0"===i)t=i;return t},setCaret:function(t){var n;n=e.get(0);n.setSelectionRange?(n.focus(),n.setSelectionRange(t,t)):n.createTextRange&&(n=n.createTextRange(),n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select())},events:function(){e.on("keydown.mask",function(){s=o.val()});e.on("keyup.mask",o.behaviour);e.on("paste.mask",function(){setTimeout(function(){e.keydown().keyup()},100)})},destroyEvents:function(){e.off("keydown.mask keyup.mask paste.mask")},val:function(n){var r=e.is(t.zepto?"input":":input");return 0<arguments.length?r?e.val(n):e.text(n):r?e.val():e.text()},behaviour:function(e){e=e||window.event;var n=e.keyCode||e.which;if(-1===t.inArray(n,i.byPassKeys)){var r,s=o.getCaret();s<o.val().length&&(r=!0);var u=o.getMasked();u!==o.val()&&o.val(u);!r||65===n&&e.ctrlKey||o.setCaret(s);return o.callbacks(e)}},getMasked:function(e){var t=[],s=o.val(),u=0,a=n.length,f=0,l=s.length,c=1,p="push",v=-1,m,y;r.reverse?(p="unshift",c=-1,m=0,u=a-1,f=l-1,y=function(){return-1<u&&-1<f}):(m=a-1,y=function(){return u<a&&f<l});for(;y();){var b=n.charAt(u),w=s.charAt(f),E=i.translation[b];if(E)w.match(E.pattern)?(t[p](w),E.recursive&&(-1===v?v=u:u===m&&(u=v-c),m===v&&(u-=c)),u+=c):E.optional&&(u+=c,f-=c),f+=c;else{if(!e)t[p](b);w===b&&(f+=c);u+=c}}e=n.charAt(m);a!==l+1||i.translation[e]||t.push(e);return t.join("")},callbacks:function(t){var i=o.val(),u=o.val()!==s;if(!0===u&&"function"===typeof r.onChange)r.onChange(i,t,e,r);if(!0===u&&"function"===typeof r.onKeyPress)r.onKeyPress(i,t,e,r);if("function"===typeof r.onComplete&&i.length===n.length)r.onComplete(i,t,e,r)}};w={isNumber:function(e){var t=e.which?e.which:event.keyCode;if(t>31&&(t<48||t>57))return false;return true}};i.remove=function(){o.destroyEvents();o.val(i.getCleanVal()).removeAttr("maxlength")};i.getCleanVal=function(){return o.getMasked(!0)};i.init()};t.fn.mask=function(e,r){return this.each(function(){t(this).data("mask",new n(this,e,r))})};t.fn.unmask=function(){return this.each(function(){try{t(this).data("mask").remove()}catch(e){}})};t.fn.cleanVal=function(){return t(this).data("mask").getCleanVal()};t("*[data-mask]").each(function(){var e=t(this),n={};"true"===e.attr("data-mask-reverse")&&(n.reverse=!0);"false"===e.attr("data-mask-maxlength")&&(n.maxlength=!1);e.mask(e.attr("data-mask"),n)});var r=["(00) 00000-0000","(00) 0000-00009"];$('[data-inputmask="celular"], [data-inputmask="cellphone"]').mask(r[1],{onKeyPress:function(e,t,n,i){n.mask(e.length>14?r[0]:r[1],i)}});$('[data-inputmask^="#"]').mask($('[data-inputmask^="#"]').data("inputmask"));$('[data-inputmask="cnpj"]').mask("00.000.000/0000-00");$('[data-inputmask="cpf"]').mask("000.000.000-00");$('[data-inputmask="telefone"], [data-inputmask="phone"]').mask("(00) 0000-0000");$('[data-inputmask="fax"]').mask("(00) 0000-0000");$('[data-inputmask="ncm"]').mask("00000000");$('[data-inputmask="data"]').mask("00/00/0000");$('[data-inputmask="date"]').mask("0000/00/00");$('[data-inputmask="hora"]').mask("00:00:00");$('[data-inputmask="time"]').mask("00:00:00");$('[data-inputmask="data_hora"]').mask("00/00/0000 00:00:00");$('[data-inputmask="date_time"]').mask("0000/00/00 00:00:00");$('[data-inputmask="cep"]').mask("00000-000");$('[data-inputmask="porcetagem"], [data-inputmask="percent"]').mask("##0,00%",{reverse:true,maxlength:false});$('[data-inputmask="dinheiro"], [data-inputmask="money"]').mask("#.##0,00",{reverse:true,maxlength:false});$('[data-inputmask="numeros"], [data-inputmask="numbers"]').keypress(function(e){return w.isNumber(e)});$('[data-inputmask="letras"], [data-inputmask="letters"]').keypress(function(e){e=e?e:event;var t=e.charCode?e.charCode:e.keyCode?e.keyCode:e.which?e.which:0;if(t>31&&(t<65||t>90)&&(t<97||t>122)){return false}return true});$('[data-inputmask="money3"], [data-inputmask="dinheiro3"]').val("0,00");$('[data-inputmask="money3"], [data-inputmask="dinheiro3"]').keypress(function(e){if(!w.isNumber(e))return false;var t=false;var n=e.keyCode?e.keyCode:e.which?e.which:e.charCode;var r=String.fromCharCode(e.keyCode||e.which);if(document.getSelection().toString()!="")$(this).val("0,00");if(r.length<10||n==8||n==46||n==9){if(n>=48&&n<=57||n>=96&&n<=105||n==8||n==46){var i;i=$(this).val()+r;i=i.replace(",","").replace(".","");while(i.substring(0,1)=="0"){i=i.substring(1,i.length)}var s;switch(i.length){case 0:var o=i;s=t?"0,000":"0,00";break;case 1:var o=i;s=t?"0,00"+o:"0,0"+o;break;case 2:var o=i;s=t?"0,0"+o:"0,"+o;break;case 3:if(t){var o=i;s="0,"+o}else{var u=i.substring(0,i.length-2);var o=i.substring(i.length-2);s=u+","+o}break;default:var u=i.substring(0,i.length-(t?3:2));var o=i.substring(i.length-(t?3:2));s=u+","+o;break}$(this).val(s);if(i.length>=6)$(this).mask("#.##0,00",{reverse:true,maxlength:false});return false}}}).keydown(function(e){var t=e.keyCode?e.keyCode:e.which?e.which:e.charCode;var n="";size=$(this).val().replace(",","").replace(".","").length;number=$(this).val().replace(",","").replace(".","").substring(0,size-1);if(size<=3)if(t===8){switch(size-1){case 3:n="0,0"+number;break;case 2:n="0,"+number;break}$(this).val(n);return false}});$('[data-inputmask="alfanumerico"], [data-inputmask="alphanumeric"]').keypress(function(t){e=t||window.event;var n=/[^\sa-z\d]/i,r=String.fromCharCode(e.keyCode||e.which);if(e.which!==0&&e.charCode!==0&&n.test(r)){return false}return true});$("[data-inputmask-restrict]").keypress(function(e){var t=true;var n=String.fromCharCode(e.keyCode||e.which);var r=$("[data-inputmask-restrict], [data-inputmask-restrict]").data("inputmask-restrict").replace(/\s+/g,"");var i=r.split("");$.each(i,function(e,r){if(n===r){t=false;return false}return true});return t})})(window.jQuery||window.Zepto)