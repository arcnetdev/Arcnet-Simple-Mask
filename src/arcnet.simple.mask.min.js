/**
 * Created by Weslley Neri on 19/02/14.
 */
(function(t){var n=function(e,n,r){var i=this,s;e=t(e);n="function"===typeof n?n(e.val(),void 0,e,r):n;i.init=function(){r=r||{};i.byPassKeys=[9,16,17,18,36,37,38,39,40,91];i.translation={0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}};i.translation=t.extend({},i.translation,r.translation);i=t.extend(!0,{},i,r);e.each(function(){!1!==r.maxlength&&e.attr("maxlength",n.length);e.attr("autocomplete","off");o.destroyEvents();o.events();o.val(o.getMasked())})};var o={getCaret:function(){var t;t=0;var n=e.get(0),r=document.selection,i=n.selectionStart;if(r&&!~navigator.appVersion.indexOf("MSIE 10"))n.focus(),t=r.createRange(),t.moveStart("character",-n.value.length),t=t.text.length;else if(i||"0"===i)t=i;return t},setCaret:function(t){var n;n=e.get(0);n.setSelectionRange?(n.focus(),n.setSelectionRange(t,t)):n.createTextRange&&(n=n.createTextRange(),n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select())},events:function(){e.on("keydown.arcnetmask",function(){s=o.val()});e.on("keyup.arcnetmask",o.behaviour);e.on("paste.arcnetmask",function(){setTimeout(function(){e.keydown().keyup()},100)})},destroyEvents:function(){e.off("keydown.arcnetmask keyup.arcnetmask paste.arcnetask")},val:function(n){var r=e.is(t.zepto?"input":":input");return 0<arguments.length?r?e.val(n):e.text(n):r?e.val():e.text()},behaviour:function(e){e=e||window.event;var n=e.keyCode||e.which;if(-1===t.inArray(n,i.byPassKeys)){var r,s=o.getCaret();s<o.val().length&&(r=!0);var u=o.getMasked();u!==o.val()&&o.val(u);!r||65===n&&e.ctrlKey||o.setCaret(s);return o.callbacks(e)}},getMasked:function(e){var t=[],s=o.val(),u=0,a=n.length,f=0,l=s.length,c=1,p="push",v=-1,m,y;r.reverse?(p="unshift",c=-1,m=0,u=a-1,f=l-1,y=function(){return-1<u&&-1<f}):(m=a-1,y=function(){return u<a&&f<l});for(;y();){var b=n.charAt(u),w=s.charAt(f),E=i.translation[b];if(E)w.match(E.pattern)?(t[p](w),E.recursive&&(-1===v?v=u:u===m&&(u=v-c),m===v&&(u-=c)),u+=c):E.optional&&(u+=c,f-=c),f+=c;else{if(!e)t[p](b);w===b&&(f+=c);u+=c}}e=n.charAt(m);a!==l+1||i.translation[e]||t.push(e);return t.join("")},callbacks:function(t){var i=o.val(),u=o.val()!==s;if(!0===u&&"function"===typeof r.onChange)r.onChange(i,t,e,r);if(!0===u&&"function"===typeof r.onKeyPress)r.onKeyPress(i,t,e,r);if("function"===typeof r.onComplete&&i.length===n.length)r.onComplete(i,t,e,r)}};i.remove=function(){o.destroyEvents();o.val(i.getCleanVal()).removeAttr("maxlength")};i.getCleanVal=function(){return o.getMasked(!0)};i.init()};var r={isNumber:function(e){var t=e.which?e.which:event.keyCode;if(t>31&&(t<48||t>57))return false;return true},money3:function(e,t,n){var i="";if(t){i="%"}if(n!=null){var s=n.threedecimals;var o=n.maxlength}var u=s?"000":"00";$(e).val().length===0?$(e).val("0."+u+i):$(e).val();$(e).keypress(function(e){if(!r.isNumber(e))return false;var n=false;var a=e.keyCode?e.keyCode:e.which?e.which:e.charCode;var f=String.fromCharCode(e.keyCode||e.which);if(document.getSelection().toString()!="")$(this).val("0,00");if(f.length<10||a==8||a==46||a==9){if(a>=48&&a<=57||a>=96&&a<=105||a==8||a==46){var l=$(this).val();var c=t?l.substring(0,l.length-1)+f:l+f;c=c.replace(",","").replace(".","");while(c.substring(0,1)=="0"){c=c.substring(1,c.length)}var h;switch(c.length){case 0:var p=c;h=s?"0,000":"0,00";break;case 1:var p=c;h=s?"0,00"+p:"0,0"+p;break;case 2:var p=c;h=s?"0,0"+p:"0,"+p;break;case 3:if(s){var p=c;h="0,"+p}else{var d=c.substring(0,c.length-2);var p=c.substring(c.length-2);h=d+","+p}break;default:var d=c.substring(0,c.length-(s?3:2));var p=c.substring(c.length-(s?3:2));h=d+","+p;break}var v=c.length-1;if(v<o||o==undefined){$(this).val(h+i);if(c.length>=6)$(this).arcnetmask("#.##0,"+u+i,{reverse:true,maxlength:false});return false}else{return false}}}}).keydown(function(e){var n=e.keyCode?e.keyCode:e.which?e.which:e.charCode;var r="";size=$(this).val().replace(",","").replace(".","").replace("%","").length;number=$(this).val().replace(",","").replace(".","").substring(0,size-1);if(t&&n===8&&size>3){var o=$(this).val();$(this).val(o.substring(0,o.length-2)+i);return false}if(size<=(s?4:3)){if(n===8){switch(size-1){case 3:r=(s?"0,":"0,0")+number;break;case 2:r=(s?"0,0":"0,")+number;break}$(this).val(r+i);return false}}})},cnpj:function(e){$(e).arcnetmask("00.000.000/0000-00")},cpf:function(e){$(e).arcnetmask("000.000.000-00")},phone:function(e){$(e).arcnetmask("(00) 0000-0000")},fax:function(e){$(e).arcnetmask("(00) 0000-0000")},cellphone:function(e){var t=["(00) 00000-0000","(00) 0000-00009"];$(e).arcnetmask(t[1],{onKeyPress:function(e,n,r,i){r.arcnetmask(e.length>14?t[0]:t[1],i)}})},ncm:function(e){$(e).keypress(function(e){return definedFunctions.isNumber(e)});$(e).arcnetmask("00000000")},date:function(e){$(e).arcnetmask("00/00/0000")},time:function(e){$(e).arcnetmask("00:00:00")},date_time:function(e){$(e).arcnetmask("00/00/0000 00:00:00")},cep:function(e){$(e).arcnetmask("00000-000")},percent:function(e,t){this.money3(e,false,t)},money:function(e){$(e).arcnetmask("#.##0,00",{reverse:true,maxlength:false})}};var i={numbers:function(e){$(e).keypress(function(e){return r.isNumber(e)})},letters:function(e){$(e).keypress(function(e){e=e?e:event;var t=e.charCode?e.charCode:e.keyCode?e.keyCode:e.which?e.which:0;if(t>31&&(t<65||t>90)&&(t<97||t>122)){return false}return true})},alphanumeric:function(t){$(t).keypress(function(t){e=t||window.event;var n=/[^\sa-z\d]/i,r=String.fromCharCode(e.keyCode||e.which);if(e.which!==0&&e.charCode!==0&&n.test(r)){return false}return true})},restrictWords:function(e,t){$(e).keypress(function(e){var n=true;var r=String.fromCharCode(e.keyCode||e.which);var i=t.replace(/\s+/g,"");var s=i.split("");$.each(s,function(e,t){if(r===t){n=false;return false}return true});return n})},acceptWords:function(e,t){$(e).keypress(function(e){var n=true;var r=String.fromCharCode(e.keyCode||e.which);var i=t.replace(/\s+/g,"");var s=i.split("");$.each(s,function(e,t){if(r===t){n=true;return false}n=false});return n})}};t.fn.arcnetmask=function(e,i){return this.each(function(){switch(e){case"cnpj":r.cnpj(this);break;case"cpf":r.cpf(this);break;case"telefone":r.phone(this);break;case"phone":r.phone(this);break;case"cellphone":r.cellphone(this);break;case"celular":r.cellphone(this);break;case"fax":r.fax(this);break;case"ncm":r.ncm(this);break;case"data":r.date(this);break;case"date":r.date(this);break;case"hora":r.time(this);break;case"time":r.time(this);break;case"data_hora":r.date_time(this);break;case"date_time":r.date_time(this);break;case"cep":r.cep(this);break;case"dinheiro":r.money(this);break;case"money":r.money(this);break;case"money3":r.money3(this,false,i);break;case"dinheiro3":r.money3(this,false,i);break;case"porcentagem":r.percent(this,i);break;case"percent":r.percent(this,i);break;default:t(this).data("mask",new n(this,e,i))}})};t.fn.arcnetunmask=function(){return this.each(function(){try{t(this).data("mask").remove()}catch(e){}})};t.fn.arcnetmaskrestricts=function(e,t){return this.each(function(){switch(e){case"numbers":i.numbers(this);break;case"letters":i.letters(this);break;case"alphanumeric":i.alphanumeric(this);break;case"restrictWords":i.restrictWords(this,t);break;case"acceptWords":i.acceptWords(this,t);break}})};t.fn.arcnetmasklength=function(e,t){return this.each(function(){try{lengths.setLength(this,e)}catch(e){}})};t.fn.cleanVal=function(){return t(this).data("mask").getCleanVal()};t("*[data-mask]").each(function(){var e=t(this),n={};"true"===e.attr("data-mask-reverse")&&(n.reverse=!0);"false"===e.attr("data-mask-maxlength")&&(n.maxlength=!1);e.mask(e.attr("data-mask"),n)});$(window).bind("load",function(){$("[data-inputmasklength]").arcnetmasklength($("[data-inputmasklength]").data("inputmasklength"));$('[data-inputmask^="#"]').arcnetmask($('[data-inputmask^="#"]').data("inputmask"));$('[data-inputmask="celular"], [data-inputmask="cellphone"]').arcnetmask("cellphone");$('[data-inputmask="cnpj"]').arcnetmask("cnpj");$('[data-inputmask="cpf"]').arcnetmask("cpf");$('[data-inputmask="telefone"], [data-inputmask="phone"]').arcnetmask("telefone");$('[data-inputmask="fax"]').arcnetmask("fax");$('[data-inputmask="ncm"]').arcnetmask("ncm");$('[data-inputmask="data"]').arcnetmask("data");$('[data-inputmask="date"]').arcnetmask("data");$('[data-inputmask="hora"]').arcnetmask("hora");$('[data-inputmask="time"]').arcnetmask("time");$('[data-inputmask="data_hora"]').arcnetmask("date_time");$('[data-inputmask="date_time"]').arcnetmask("date_time");$('[data-inputmask="cep"]').arcnetmask("cep");$('[data-inputmask="porcentagem"], [data-inputmask="percent"]').arcnetmask("percent");$('[data-inputmask="dinheiro"], [data-inputmask="money"]').arcnetmask("money");$('[data-inputmask="money3"], [data-inputmask="dinheiro3"]').arcnetmask("dinheiro3");$('[data-inputmask-restrict="numeros"], [data-inputmask-restrict="numbers"]').arcnetmaskrestricts("numbers");$('[data-inputmask-restrict="letras"], [data-inputmask-restrict="letters"]').arcnetmaskrestricts("letters");$('[data-inputmask-restrict="alfanumerico"], [data-inputmask-restrict="alphanumeric"]').arcnetmaskrestricts("alphanumeric");var e=$("[data-inputmask-restrictwords]").data("inputmask-restrictwords")?$("[data-inputmask-restrictwords]").data("inputmask-restrictwords").replace(/\s+/g,""):null;$("[data-inputmask-restrictwords]").arcnetmaskrestricts("restrictWords",e);var t=$("[data-inputmask-acceptwords]").data("inputmask-acceptwords")?$("[data-inputmask-acceptwords]").data("inputmask-acceptwords").replace(/\s+/g,""):null;$("[data-inputmask-acceptwords]").arcnetmaskrestricts("acceptWords",t)})})(window.jQuery||window.Zepto)